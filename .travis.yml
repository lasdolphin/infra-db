language: python
python:
- '3.6'
install:
- pip install ansible==2.3.0 molecule apache-libcloud
script:
- molecule --debug create
- molecule --debug converge
- molecule --debug verify
after_script:
- molecule --debug destroy
env:
  matrix:
  - GCE_CREDENTIALS_FILE="$(pwd)/credentials/otus-devops-56b15175f329.json"
  global:
  - secure: jsA9ukZqIKZYbB7cSUpc5AOdcZ9Fto7p991EefAGJliIobwDgI+r7+I60EQ0aTSDUufZ+xlI0Zm3N2W1iAMSnZl0JOaK6Y5d5QF68VRfICrIYn6ytu3Ecold0kQ3b8Z18WvJK3bFi1yx25qtVHW6d6Yz0eqYEWlOo2y989He0yfJjMHOZjzlg2J8dq+M5jRAm/dFZZeAMq7mjX1NlTeQJE7veYS3CvVaeygCICuPIw7DGyIUkKjqacNV3wLDWqcgrWH91QTKGvDsjxBVg/aacTZvyPqPiKN3EbCzQuql0nrhC/VhqxYp74QbSFdF4tnP0igKzEMvsTpk2MWu2jC42wTQxqvm2pa49X7Lk4ss8FYUIbaAX/THXxj9oLawNx3M4B0qu6ZZwoPmR+FxRnvoi7o3+bu+cFqA1V2zUoFtdlHKkY/SA2f56tQAo6IubZyVVLxwrHBdCHTudBOkZi0Nvs7zblnlEa7sDIpxtGPjbFXkQS/oPvrSoQeEjS1bG3zD1sFbRtja6Z+m9u2GDFIZsI0nc/SZO+lNaJQxC/42WdEe+BrHK2Byxt7WTv1dOxSHK10oSZpUHWE4FNCPB2TPj65QG8LcaDoOzEVEfB+kdLjHk5RbnTyosMCU+d15/ZvMKf7EsEOl0pC0wbjTJlSbGi+2VOJdcm61X52e8UKYn2w=
  - secure: pRWdrCBWVzfnY2BwpdJY7IXLaKqE93sRsh7TvWKPykx0fK4vLQNA3Du9YwApbvH4qzMIstf+XwUBmJZ+v9zaJo5cyusNR3Nu5eyMs9sogMT0nJC+liSdK7agI6nSJAFGla7cBs1nZvki4nGh2WoW6R6N/auVDkCvxeSJh4vtlvAs2RNmjmjbFytSg2eGuj2aC+JpyBdwEwByDR45oupy/g9x8eFoIhmnFfL//l5Io8BhCzmP/sLZLcIOora+vE4O4atcanpQYtyddi/RhR4Ox+5qL7cthlEa00JURZWhR/QNZ0+5VL/OuXyhABwODqQenEOAu2thKt58xObHkGUUWmaKf7IKTDAsDeq+0poVPHceBbTpw3gbKmFnRsBwuZMuqQxsBEq8VKeajF+mkm9VUj1KICOfJDEEkbih9QVL+0kAaf+hEVCALBZeKDYZ1OgExlkHMaUGS+aOu1pSUXBbbcE7tQMBWEBENI3ZLMxZQnzvZayk+Yt5y02TRtYK7WFblcvUjsDriB0PNxllp+9MipE8cjtV6XHgPWsDMwQ4BwoIk2XlMUkuV4B17r7flEnLr1JzkVlkaAbso9mjCx3YQuvaBSsrY1Uhp7h46gAJPO0Ev70CJYfhEkfuN1RE2D3/RkO75aoGoefL3em8SPTGfQu5gkIK4w7GnL9/sxQZhzc=
  - secure: Kt0Zf8zgr1J6LPhWHS+1iNzF7YHp5dRI8GfU88yiDvr7HTTw7vAKkoZFAKQU+r5UG+Ugjqlx/IhLRS0KJ58luUoRdTQfD3UvuulZsySFN7ddm6Lr2UZoHDreY6XLK492WPwygnIVrRiwigq6zVESjScXsqFI1f7DG8ROkVMArjVWggpedhNOvIquqxJ+jNGVGPLBnGablKIq3CxGfjX/TQMg8BvOsXGT5N+S/08mJs8NV8HM7HUUk+60eiGRlpBs+1DN+DW27WwFi4UFoKgpDpnolzexDHkU9YowcQAnL3uBk3W8eTpr/cdL62Fi1pbvBpAq+wu1fb+qa6uhxxSSnKRCkI4NVxWFCNuIfwDYQ0hJDLklRlq3sHM+9m2o83fW7nxbIpqD2jY51T8eJlnpD5zULIYhkxFlKk1jMY3mtdxHKkcUxqgZlY4sa8PTndVUel7JSQMbFAmn5IqMPumYixp6Y7xzJ0IpQJ2V1NOx8TTijZgmu2loEKyy/cZcKP1S+vzeYgejWpWdb1nl344uAsHhvBnjsKfwzqHzrNuYKCtdxtVVckeSF+6VZs6AWBgIzxatCAN1K/8FCZRgU6ViNGF5Vn/+yH0xdugjG2bDi/X4I7osM/N9PzZNgXrHRzFiAyyQ3MLSz52yqJj3SZ4cfixiGfWN1Fz1G7ZM16yG1wk=
  - secure: EH8qt3xoy38k72MxPVnI2mjLf49AAPLVrAIhcNb5TAnKWTSntTyrWNJuyNeCV2xxCYg/wkgOnnKZCbNFvLYrntUymb8p+xsW4V8GFdXQqaBBkj+NGW0tRkytC7pM4sGnmktuonOSyAcAx6LfLzx9kEWdDkNYMKzUzYcd3iu9lXr7EuVc9oZblsDyqnAiWmo5OSje7Hnn1Ut9g+6F0CPsB7n8c2IXFZjtL2NA29ODgmyw009c0mu8B5EvYQv1/CzlFsUmdT4ajnHH//PmCLoyhFI2HTWJm5un9NRppDaoEopqYs0esgZoihpcO1705pYmNBiEgJAq7bTsulnweOj2HNJOqyek4VDruDvWbHh7RhF33jYtqyS6atapjmKeuOG12eDaluBr7hJAHFSVe/EzIASLgqViWzI4eo4BkUbI4MEEETw3LNeXWBxsSzryv28ew0bslj3+VTW3itIO9DFodKaECqC1NoYI6yCHQxmCUHfUGY44aqw+5RIKwbDn3EepY3PXcRe1ymHqAuX++Q4hH6OD6PnotS81vRZHC/pmHA0XkJI4P5UMgsWbFgcux7tA8lFwcks+Bn+KpAjHfA626gv0P+50770sswlLGM/LFcNXLMGY0rdDHXxXldhJx627tqWDobjuNQFnppheaMHe2e+oGKwfOj4WJ/PXKRhmt5c=
  - secure: Z/c8+GJUArYrws1rEKuM4NmaS4wnhFkPVbUhO8dDfBz4cMFEd3GpF8Ngp0VGEFMpKCDT9E+l+/Uert0BF5V9Ne+1SD2MA093emtLLa8HvV56prtgv9f9cS/eGL2MwXxg6yGsl9J7QEdWdz5ohwla4do6TofKCC5uXDRWv1ExJ8/T0bvUS/y3Tdp+n2rvPtZ86CNJI3sThIEUWiFg+i9ZFVw5wlwKEpVY9Fj2oabPskOzBChELZcvgNnAUY3wi5AaB8G/BYzMh3hEDJNK4Ys8eSpvBBfTC79pXXI8UQI5ww0jcmqDwsQYCydf3r8bTfBoGafthE9sFjKdFIyJ8QhoEQ4TZXc+4xHkSxKmXdoIqax4yDCAPw1awga45+8uN3a1/cB/pD6aau22IyHWVEiKopfug4raBSQxHwTL5/xPZUTErZ6MIsDjOmr7/RYia0ECwtpAHsb/6TQ92bXNgYV1Lr3ASJVUKXpzWseWy85eyvJfTeU8TUc+IlMkHYJljW9VLmpEw7el88RQNwPGMS9Yc3HxDMp3J9rSE61hRG8EldO5LdCRM5YutVjzUYlT4IATG1cfimBEiinJiZpHIkhNn1Pnyw/NlGD0qUnJ7KCLC0VhQNqW99PWifpzgHCAxNgxbazbmVGxMHeJVrjBRnUzIZ+Ib527nZ0lx3yw6Xb3L0c=
  - secure: ma+q/FBnge4Nj+kFqjQ3VVHnkhcoKPCm2Ul0hjgc853RowhIKfeG3y7T4fe8TDx4wBzcVPx0GCvD47JPHRQdDWamHixERcNV4hIIhWQj3Z1f95ri+RX1ORCyCN5303E7ypFX6eoIB7EKJoV3MbLvgwuvFWvE7rW2//KNBg18rEu7sklQG5cAsmWLSh6ssHzhP5IXweItVkgVylWbLxo90kbuTCasYAvNP1S2iQbsoaKtpJhg9QqPsQKpHARYrAganro344YdF/Zr5wz8puTx4ussn1U6raykeKSs1m4cD00Soa3TJkvS50Ihn5zb2/S6ak5y01Ft3rB/z8yDML/8YY90NpllbSxojxT168sQq/QkFQXOBmW56w8HYOpLSB6T/fxlBuXxdNbKV+WZ2poN6RY+8s1j3LoS/dnBZPkQCFRoyHdXEZW4EyCfbK8RWe3xzQPJH2wz9ckoYtHm0I+OxnLKd23RLlBrJiIwp412xtjeb7dqiJ38UkBHVuQ2xsjegSAC+Siv/LQ/HQwb2Fpi8nmT9cIvdcoIuqKMMR+BCSfuNlyEZ0fpQrpsK6hRoLRaxENUnuC/t8FvlUrl9RO1RPYaVFytqSN4tu3YDQyQ1VcPPBtzeOlI0hxG3PXNNiT8kIl0pRcCSgffxu5Mgdn+7pMkJ+vEXHqIKMQXZtD84PA=
before_install:
- openssl aes-256-cbc -K $encrypted_e615753abb37_key -iv $encrypted_e615753abb37_iv
  -in secrets.tar.enc -out secrets.tar -d
- tar xvf secrets.tar
- mv google_compute_engine /home/travis/.ssh/
- chmod 0600 /home/travis/.ssh/google_compute_engine
